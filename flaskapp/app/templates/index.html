<!-- dummyapp/app/templates/index.html -->
<html>
<head>
<title>{{ Title }}</title>
</head>
<body>
<h1>DUBLIN BIKES</h1>
<div id="stuff">
</div>
<div id="map" style="width:100%;height:700px;">
<script>
    function initMap() {
        var dublin = {lat: 53.346880, lng: -6.265615,};
        var map = new  google.maps.Map(document.getElementById('map'), {
          zoom: 14.1,
          center: dublin
        });
        var cyclist = {
            url: 'http://maps.google.com/mapfiles/kml/shapes/cycling.png',
            size: new google.maps.Size(70, 60),
            scaledSize: new google.maps.Size(30, 30)
        }
            
        {% for Station in Stations %}
        
        var location = {lat: {{ Station.latitude }}, lng: {{ Station.longitude }},};
        var stationName = ' {{ Station.name }} ';
        var infoString = 
            '<h4>' + ' {{ Station.address }} ' + '</h4>'+
            '<p> Station I.D. : ' + '{{ Station.number }}' + '<p>' + 
            '<p> Total Number Bike Stands : ' + '{{ Station.stands }}' + '<p>' 
            ;
        var marker = new google.maps.Marker({
          position: location,
          draggable: false,
          animation: google.maps.Animation.DROP,
          map: map,
          contentString: infoString,    
          title: stationName,
          icon: cyclist
          });
         var infowindow = new google.maps.InfoWindow({});
         marker.addListener('click', function() {
           infowindow.setContent(this.contentString);
           infowindow.open(map, this);
     });
    
    
        {% endfor %}  
        // some parts adapted from: https://stackoverflow.com/questions/30012913/google-map-api-v3-add-multiple-infowindows   
    };
                           
    </script>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBRUrdJ4Tz9rLrHrOkwJWpA9QSYNJbWQ0Q&callback=initMap">
</script>
    </div>
</body>
</html>