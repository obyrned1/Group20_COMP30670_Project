<!-- dummyapp/app/templates/index.html -->
<html>
<head>
<title>{{ Title }}</title>
</head>
<body>
<h1>DUBLIN BIKES</h1>
<div id="stuff">
</div>
<div id="map" style="width:100%;height:600px;">
    <!--
        function getdaily(value){
    var xmlhttp = new XMLHttpRequest();
    var url = "{{ Stations }}";

    xmlhttp.onreadystatechange = function(){
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
            var parsedObj = JSON.parse(xmlhttp.responseText);
            staticData(parsedObj,value);
        }
    };

    xmlhttp.open("GET", url, true);
    xmlhttp.send();
}
        function staticData(obj, value){
        //var myObj = JSON.parse('{{ Stations }}');
        var value = value;
        var hello = obj;
        document.getElementById("stuff").innerHTML = hello;
        }
    -->
<script>
    function initMap() {
        var dublin = {lat: 53.3454403, lng: -6.2714263,};
        var map = new  google.maps.Map(document.getElementById('map'), {
          zoom: 14,
          center: dublin
        });
        var myLatLng = {lat: 53.344407, lng: -6.257285,};
        var contentString = '<div>'+
            '<div>'+
            '</div>'+
            '<h1>Trinity College Dublin</h1>'+
            '<div>'+
            '<p><b>TRINITY</b> A great bunch of lads.</p>'+
            '</div>'+
            '</div>';
        var infowindow = new google.maps.InfoWindow({
          content: contentString
        });
        var marker = new google.maps.Marker({
          position: myLatLng,
          draggable: false,
          animation: google.maps.Animation.DROP,
          map: map,
          title: "Trinity"
          });
        marker.addListener('click', function() {
            infowindow.open(map, marker);
        });
        
        {% for Station in Stations %}
        var markers = new google.maps.Marker({
          position: {lat: {{ Station.latitude}}, lng: {{ Station.longitude }},},
          draggable: false,
          animation: google.maps.Animation.DROP,
          map: map
          });
        {% endfor %}
    };
    </script>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBRUrdJ4Tz9rLrHrOkwJWpA9QSYNJbWQ0Q&callback=initMap">
</script>
    </div>
</body>
</html>