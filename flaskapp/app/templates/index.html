<!-- dummyapp/app/templates/index.html -->
<html>
<head>
<title>{{ Title }}</title>
</head>
<body>
<h1>DUBLIN BIKES</h1>
<div id="stuff">
</div>
<div id="map" style="width:100%;height:700px;">
<script>
    function initMap() {
        var dublin = {lat: 53.346880, lng: -6.265615,};
        var map = new  google.maps.Map(document.getElementById('map'), {
          zoom: 14.1,
          center: dublin
        });
        var cyclist = {
            url: 'http://maps.google.com/mapfiles/kml/shapes/cycling.png',
            size: new google.maps.Size(70, 60),
            scaledSize: new google.maps.Size(30, 30)
        }
            
        {% for Station in Stations %}
        var location = {lat: {{ Station.latitude}}, lng: {{ Station.longitude }},};
        var stationName = ' {{ Station.name }} ';
        var marker = new google.maps.Marker({
          position: location,
          draggable: false,
          animation: google.maps.Animation.DROP,
          map: map,
          title: stationName,
          icon: cyclist
          });
        var infoString = '{{ Station.stands }}';
        marker.addListener('click', function() {
            info.open(map, marker)
        });
        var locationX = {lat: {{ Station.latitude}}, lng: {{ Station.longitude }},};
        var info = new google.maps.InfoWindow({
          content: infoString,
          position: locationX,
          map: map
        });
        {% endfor %}        
        
        
    };
                           
    </script>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBRUrdJ4Tz9rLrHrOkwJWpA9QSYNJbWQ0Q&callback=initMap">
</script>
    </div>
</body>
</html>